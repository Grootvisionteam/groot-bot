from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, ContextTypes, MessageHandler, filters

# Ù¾ÛŒØ§Ù…ÛŒ Ú©Ù‡ Ø¨Ø§ Ø¯Ø³ØªÙˆØ± /start Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    # Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Inline Ø¨Ø§ Ø¢ÛŒÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ú†Øª
    keyboard = [
        [InlineKeyboardButton("ğŸš€ Ø´Ø±ÙˆØ¹", callback_data="start_interaction")],
        [InlineKeyboardButton("â„¹ï¸ Ø±Ø§Ù‡Ù†Ù…Ø§", callback_data="help")],
        [InlineKeyboardButton("ğŸ“ ØªÙ…Ø§Ø³ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ", callback_data="support")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯Ú¯ÙˆÛŒÛŒ Ø¨Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
    await update.message.reply_text(
        "Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª Ù…Ø§ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:",
        reply_markup=reply_markup
    )

# Ù‡Ù†Ø¯Ù„Ø± Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
async def handle_button(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    await query.answer()

    # Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
    if query.data == "start_interaction":
        await query.message.reply_text("Ø´Ù…Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø´Ø±ÙˆØ¹ ØªØ¹Ø§Ù…Ù„ Ø¨Ø§ Ø±Ø¨Ø§Øª Ù‡Ø³ØªÛŒØ¯. Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:")
    elif query.data == "help":
        await query.message.reply_text("Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.")
    elif query.data == "support":
        await query.message.reply_text("Ù„Ø·ÙØ§Ù‹ Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯. Ù…Ø§ Ø¯Ø± Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¯Ø§Ø¯.")
        # Ø°Ø®ÛŒØ±Ù‡ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ
        context.user_data['support'] = True

# Ù‡Ù†Ø¯Ù„Ø± Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
async def handle_support_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    # Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø³Øª
    if context.user_data.get('support', False):
        # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ù‡ Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø´Ù…Ø§
        your_telegram_id = "https://t.me/grootvision"
        await context.bot.send_message(
            chat_id=your_telegram_id,
            text=f"Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ú©Ø§Ø±Ø¨Ø± {update.message.from_user.username}:\n\n{update.message.text}"
        )
        # Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±
        await update.message.reply_text("Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú¯Ø±ÙØª.")
        # ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø­Ø§Ù„Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù¾Ø³ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
        context.user_data['support'] = False

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø±Ø¨Ø§Øª
if __name__ == "__main__":
    TOKEN = "7831530422:AAFJwl8Li5mFxmRMLzvGA98zQYu4LB6kGsY"
    app = ApplicationBuilder().token(TOKEN).build()

    # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù‡Ù†Ø¯Ù„Ø±Ù‡Ø§
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(handle_button))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_support_message))  # Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

    print("Ø±Ø¨Ø§Øª Ø´Ù…Ø§ Ø±ÙˆØ´Ù† Ø§Ø³Øª!")
    app.run_polling()
